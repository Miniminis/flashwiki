# 2022.12.18

## 한 것

* 스프링 AOP 개념에 대해 공부했다.

## 배운 것

* 프록시 개념을 이용하여 비즈니스 로직과 부가기능 로직(트랜잭션 등)을 분리할 수 있다.
* 테스트를 작성할 때에는 항상 단위테스트 먼저 생각하고, 되도록이면 외부 의존 없이 직접 구현할 수 있는 방향으로 하는 것이 좋다.
  * 단위테스트를 충분히 잘 작성하면, 통합테스트에 대한 작성도 훨씬 쉬워진다.
  * 심지어는 테스트 시간도 단축되니, 테스트를 더 빨리빨리 진행하며 개발속도도 빨라지게 된다.
  * 목 프레임워크를 이용해 귀찮은 모킹 작업을 대신할 수 있다.
* 프록시와 타겟
  * 프록시가 쓰이는 목적은 두 가지가 있다. 클라이언트가 타깃에 접근하는 방법을 제한하기 위해서, 혹은 타깃에 부가적인 기능을 부여하기 위해서이다.
* 데코레이터 패턴은 부가기능 부여에 집중한 프록시 구현 패턴이다. 여러 개의 테코레이터로 타겟 객체에 부가기능을 부여할 수 있다.
  * 클라리언트 → 라인넘버 데코레이터 → 컬러 데코레이터 → 페이징 데코레이터 → 타깃 : 소스코드 출력 기능
* 프록시 패턴은 타깃 접근 제한에 초점을 둔 패턴이다. 이때 프록시는 타깃의 기능을 확장하거나 변경하지 않으면서 접근을 제어한다.
* 프록시 작성에는 두 가지 문제점이 있다. 1) 프록시 내부에 코드가 중복된다. 2) 프록시의 확장 기능이 필요없는 메서드도 계속 구현해야한다.
* 그리고 이를 해결해주는 것이 JDK의 다이내믹 프록시 개념이다. Invocation 이용!
* 다이내믹 프록시를 스프링 빈을 통해 DI 하기 위해 팩토리 빈 개념을 이용한다.

## 느낀 것

* 책을 읽을 수록 리펙토링 과정에 감탄을 하게 된다. 옆에서 사수가 하나씩 알려주는 느낌이다. 이 책 너무 재미있다.
* 희미하게 알고있던 프록시 패턴, 데코레이터 패턴을 알게 되어 좋았다.
* 프록시가 가진 강력한 힘을 알게 되었다.
* 내가 아무것도 모르고 쓰던 AOP 개념들이 하나씩 조각처럼 맞춰지는 기분이 들었다.

## 궁금한 것 / 추가로 공부할 것

