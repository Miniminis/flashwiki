# Optional

## 필요성&#x20;

* 개발자인 우리는 종종 null 체크를 깜빡하게 된다. 그래서 NPE 를 만들어내기도 한다.&#x20;
* java8부터는 이러한 부분을 보완하기 위해 Optinal 이라는 타입이 추가되었다.&#x20;



## 적절한 값이 없을 경우, 리턴 방법들 &#x20;

메소드 작업 중에 값을 제대로 리턴하기 힘든 경우, 개발자가 선택할 수 있는 방법은 대략 다음과 같았다.&#x20;

1. null 을 리턴한다.&#x20;
   1. 비용문제는 없지만, 코드를 사용하는 클라이언트에게 null 처리 부담을 전가한다.&#x20;
2. 예외를 던진다.&#x20;
   1. 스택트레이스를 찍게 되므로 비용이 비싸다.&#x20;
3. java 8 부터는 Optional 을 리턴한다.&#x20;
   1. 값이 있을수도 있고, 없을 수도 있음을 명시적으로 알려준다.&#x20;
   2. 빈 값에 대한 처리를 강제한다.&#x20;



## Optional&#x20;

* 오직 값 한개가 들어있을수도 없을수도 있는 컨테이너



## 주의할 것&#x20;

1. 리턴 값으로만 쓰기를 권장한다.&#x20;
   1. 매소드의 매개변수타입, 맵의 키 타입, 인스턴스 필드 타입으로 쓰지 않는다.&#x20;
      1. 매개변수타입 : null 값에 대한 연산이 발생할 가능성이 있기 때문에 오히려 더 번거롭고 위험해진다.&#x20;
      2. 맵의 키 타입 : 맵 인터페이스의 가장 중요한 것은 키는 null 이 아니라는 것이다. 이것에 optional type 이라는 것은 안된다.&#x20;
      3. 인스턴스 필드 타입 : 클래스를 쪼개던지, 다른 방법을 이용한다.&#x20;
2. Optional 을 리턴하는 메소드에서 null 을 리턴하지 말자.&#x20;
   1. 차라리 Optional.empty() 를 이용할 것&#x20;
3. Primitive type 을 위한 Optional 이 별도로 존재한다.&#x20;
   1. OptionalInt, OptionalLong ...&#x20;
   2. 언박싱 비용을 줄일 수 있다.&#x20;
4. Collection, Map, Stream Array, Optional 은 Optinal 로 감싸지 않는다.&#x20;

